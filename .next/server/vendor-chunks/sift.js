"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/sift";
exports.ids = ["vendor-chunks/sift"];
exports.modules = {

/***/ "(rsc)/./node_modules/sift/es5m/index.js":
/*!*****************************************!*\
  !*** ./node_modules/sift/es5m/index.js ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   $Size: () => (/* binding */ $Size),\n/* harmony export */   $all: () => (/* binding */ $all),\n/* harmony export */   $and: () => (/* binding */ $and),\n/* harmony export */   $elemMatch: () => (/* binding */ $elemMatch),\n/* harmony export */   $eq: () => (/* binding */ $eq),\n/* harmony export */   $exists: () => (/* binding */ $exists),\n/* harmony export */   $gt: () => (/* binding */ $gt),\n/* harmony export */   $gte: () => (/* binding */ $gte),\n/* harmony export */   $in: () => (/* binding */ $in),\n/* harmony export */   $lt: () => (/* binding */ $lt),\n/* harmony export */   $lte: () => (/* binding */ $lte),\n/* harmony export */   $mod: () => (/* binding */ $mod),\n/* harmony export */   $ne: () => (/* binding */ $ne),\n/* harmony export */   $nin: () => (/* binding */ $nin),\n/* harmony export */   $nor: () => (/* binding */ $nor),\n/* harmony export */   $not: () => (/* binding */ $not),\n/* harmony export */   $options: () => (/* binding */ $options),\n/* harmony export */   $or: () => (/* binding */ $or),\n/* harmony export */   $regex: () => (/* binding */ $regex),\n/* harmony export */   $size: () => (/* binding */ $size),\n/* harmony export */   $type: () => (/* binding */ $type),\n/* harmony export */   $where: () => (/* binding */ $where),\n/* harmony export */   EqualsOperation: () => (/* binding */ EqualsOperation),\n/* harmony export */   createDefaultQueryOperation: () => (/* binding */ createDefaultQueryOperation),\n/* harmony export */   createEqualsOperation: () => (/* binding */ createEqualsOperation),\n/* harmony export */   createOperationTester: () => (/* binding */ createOperationTester),\n/* harmony export */   createQueryOperation: () => (/* binding */ createQueryOperation),\n/* harmony export */   createQueryTester: () => (/* binding */ createQueryTester),\n/* harmony export */   \"default\": () => (/* binding */ createDefaultQueryTester)\n/* harmony export */ });\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise, SuppressedError, Symbol */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\ntypeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\r\n    var e = new Error(message);\r\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\r\n};\n\nvar typeChecker = function (type) {\n    var typeString = \"[object \" + type + \"]\";\n    return function (value) {\n        return getClassName(value) === typeString;\n    };\n};\nvar getClassName = function (value) { return Object.prototype.toString.call(value); };\nvar comparable = function (value) {\n    if (value instanceof Date) {\n        return value.getTime();\n    }\n    else if (isArray(value)) {\n        return value.map(comparable);\n    }\n    else if (value && typeof value.toJSON === \"function\") {\n        return value.toJSON();\n    }\n    return value;\n};\nvar coercePotentiallyNull = function (value) {\n    return value == null ? null : value;\n};\nvar isArray = typeChecker(\"Array\");\nvar isObject = typeChecker(\"Object\");\nvar isFunction = typeChecker(\"Function\");\nvar isProperty = function (item, key) {\n    return item.hasOwnProperty(key) && !isFunction(item[key]);\n};\nvar isVanillaObject = function (value) {\n    return (value &&\n        (value.constructor === Object ||\n            value.constructor === Array ||\n            value.constructor.toString() === \"function Object() { [native code] }\" ||\n            value.constructor.toString() === \"function Array() { [native code] }\") &&\n        !value.toJSON);\n};\nvar equals = function (a, b) {\n    if (a == null && a == b) {\n        return true;\n    }\n    if (a === b) {\n        return true;\n    }\n    if (Object.prototype.toString.call(a) !== Object.prototype.toString.call(b)) {\n        return false;\n    }\n    if (isArray(a)) {\n        if (a.length !== b.length) {\n            return false;\n        }\n        for (var i = 0, length_1 = a.length; i < length_1; i++) {\n            if (!equals(a[i], b[i]))\n                return false;\n        }\n        return true;\n    }\n    else if (isObject(a)) {\n        if (Object.keys(a).length !== Object.keys(b).length) {\n            return false;\n        }\n        for (var key in a) {\n            if (!equals(a[key], b[key]))\n                return false;\n        }\n        return true;\n    }\n    return false;\n};\n\n/**\n * Walks through each value given the context - used for nested operations. E.g:\n * { \"person.address\": { $eq: \"blarg\" }}\n */\nvar walkKeyPathValues = function (item, keyPath, next, depth, key, owner) {\n    var currentKey = keyPath[depth];\n    // if array, then try matching. Might fall through for cases like:\n    // { $eq: [1, 2, 3] }, [ 1, 2, 3 ].\n    if (isArray(item) &&\n        isNaN(Number(currentKey)) &&\n        !isProperty(item, currentKey)) {\n        for (var i = 0, length_1 = item.length; i < length_1; i++) {\n            // if FALSE is returned, then terminate walker. For operations, this simply\n            // means that the search critera was met.\n            if (!walkKeyPathValues(item[i], keyPath, next, depth, i, item)) {\n                return false;\n            }\n        }\n    }\n    if (depth === keyPath.length || item == null) {\n        return next(item, key, owner, depth === 0, depth === keyPath.length);\n    }\n    return walkKeyPathValues(item[currentKey], keyPath, next, depth + 1, currentKey, item);\n};\nvar BaseOperation = /** @class */ (function () {\n    function BaseOperation(params, owneryQuery, options, name) {\n        this.params = params;\n        this.owneryQuery = owneryQuery;\n        this.options = options;\n        this.name = name;\n        this.init();\n    }\n    BaseOperation.prototype.init = function () { };\n    BaseOperation.prototype.reset = function () {\n        this.done = false;\n        this.keep = false;\n    };\n    return BaseOperation;\n}());\nvar GroupOperation = /** @class */ (function (_super) {\n    __extends(GroupOperation, _super);\n    function GroupOperation(params, owneryQuery, options, children) {\n        var _this = _super.call(this, params, owneryQuery, options) || this;\n        _this.children = children;\n        return _this;\n    }\n    /**\n     */\n    GroupOperation.prototype.reset = function () {\n        this.keep = false;\n        this.done = false;\n        for (var i = 0, length_2 = this.children.length; i < length_2; i++) {\n            this.children[i].reset();\n        }\n    };\n    /**\n     */\n    GroupOperation.prototype.childrenNext = function (item, key, owner, root, leaf) {\n        var done = true;\n        var keep = true;\n        for (var i = 0, length_3 = this.children.length; i < length_3; i++) {\n            var childOperation = this.children[i];\n            if (!childOperation.done) {\n                childOperation.next(item, key, owner, root, leaf);\n            }\n            if (!childOperation.keep) {\n                keep = false;\n            }\n            if (childOperation.done) {\n                if (!childOperation.keep) {\n                    break;\n                }\n            }\n            else {\n                done = false;\n            }\n        }\n        this.done = done;\n        this.keep = keep;\n    };\n    return GroupOperation;\n}(BaseOperation));\nvar NamedGroupOperation = /** @class */ (function (_super) {\n    __extends(NamedGroupOperation, _super);\n    function NamedGroupOperation(params, owneryQuery, options, children, name) {\n        var _this = _super.call(this, params, owneryQuery, options, children) || this;\n        _this.name = name;\n        return _this;\n    }\n    return NamedGroupOperation;\n}(GroupOperation));\nvar QueryOperation = /** @class */ (function (_super) {\n    __extends(QueryOperation, _super);\n    function QueryOperation() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.propop = true;\n        return _this;\n    }\n    /**\n     */\n    QueryOperation.prototype.next = function (item, key, parent, root) {\n        this.childrenNext(item, key, parent, root);\n    };\n    return QueryOperation;\n}(GroupOperation));\nvar NestedOperation = /** @class */ (function (_super) {\n    __extends(NestedOperation, _super);\n    function NestedOperation(keyPath, params, owneryQuery, options, children) {\n        var _this = _super.call(this, params, owneryQuery, options, children) || this;\n        _this.keyPath = keyPath;\n        _this.propop = true;\n        /**\n         */\n        _this._nextNestedValue = function (value, key, owner, root, leaf) {\n            _this.childrenNext(value, key, owner, root, leaf);\n            return !_this.done;\n        };\n        return _this;\n    }\n    /**\n     */\n    NestedOperation.prototype.next = function (item, key, parent) {\n        walkKeyPathValues(item, this.keyPath, this._nextNestedValue, 0, key, parent);\n    };\n    return NestedOperation;\n}(GroupOperation));\nvar createTester = function (a, compare) {\n    if (a instanceof Function) {\n        return a;\n    }\n    if (a instanceof RegExp) {\n        return function (b) {\n            var result = typeof b === \"string\" && a.test(b);\n            a.lastIndex = 0;\n            return result;\n        };\n    }\n    var comparableA = comparable(a);\n    return function (b) { return compare(comparableA, comparable(b)); };\n};\nvar EqualsOperation = /** @class */ (function (_super) {\n    __extends(EqualsOperation, _super);\n    function EqualsOperation() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.propop = true;\n        return _this;\n    }\n    EqualsOperation.prototype.init = function () {\n        this._test = createTester(this.params, this.options.compare);\n    };\n    EqualsOperation.prototype.next = function (item, key, parent) {\n        if (!Array.isArray(parent) || parent.hasOwnProperty(key)) {\n            if (this._test(item, key, parent)) {\n                this.done = true;\n                this.keep = true;\n            }\n        }\n    };\n    return EqualsOperation;\n}(BaseOperation));\nvar createEqualsOperation = function (params, owneryQuery, options) { return new EqualsOperation(params, owneryQuery, options); };\nvar numericalOperationCreator = function (createNumericalOperation) {\n    return function (params, owneryQuery, options, name) {\n        return createNumericalOperation(params, owneryQuery, options, name);\n    };\n};\nvar numericalOperation = function (createTester) {\n    return numericalOperationCreator(function (params, owneryQuery, options, name) {\n        var typeofParams = typeof comparable(params);\n        var test = createTester(params);\n        return new EqualsOperation(function (b) {\n            var actualValue = coercePotentiallyNull(b);\n            return (typeof comparable(actualValue) === typeofParams && test(actualValue));\n        }, owneryQuery, options, name);\n    });\n};\nvar createNamedOperation = function (name, params, parentQuery, options) {\n    var operationCreator = options.operations[name];\n    if (!operationCreator) {\n        throwUnsupportedOperation(name);\n    }\n    return operationCreator(params, parentQuery, options, name);\n};\nvar throwUnsupportedOperation = function (name) {\n    throw new Error(\"Unsupported operation: \".concat(name));\n};\nvar containsOperation = function (query, options) {\n    for (var key in query) {\n        if (options.operations.hasOwnProperty(key) || key.charAt(0) === \"$\")\n            return true;\n    }\n    return false;\n};\nvar createNestedOperation = function (keyPath, nestedQuery, parentKey, owneryQuery, options) {\n    if (containsOperation(nestedQuery, options)) {\n        var _a = createQueryOperations(nestedQuery, parentKey, options), selfOperations = _a[0], nestedOperations = _a[1];\n        if (nestedOperations.length) {\n            throw new Error(\"Property queries must contain only operations, or exact objects.\");\n        }\n        return new NestedOperation(keyPath, nestedQuery, owneryQuery, options, selfOperations);\n    }\n    return new NestedOperation(keyPath, nestedQuery, owneryQuery, options, [\n        new EqualsOperation(nestedQuery, owneryQuery, options),\n    ]);\n};\nvar createQueryOperation = function (query, owneryQuery, _a) {\n    if (owneryQuery === void 0) { owneryQuery = null; }\n    var _b = _a === void 0 ? {} : _a, compare = _b.compare, operations = _b.operations;\n    var options = {\n        compare: compare || equals,\n        operations: Object.assign({}, operations || {}),\n    };\n    var _c = createQueryOperations(query, null, options), selfOperations = _c[0], nestedOperations = _c[1];\n    var ops = [];\n    if (selfOperations.length) {\n        ops.push(new NestedOperation([], query, owneryQuery, options, selfOperations));\n    }\n    ops.push.apply(ops, nestedOperations);\n    if (ops.length === 1) {\n        return ops[0];\n    }\n    return new QueryOperation(query, owneryQuery, options, ops);\n};\nvar createQueryOperations = function (query, parentKey, options) {\n    var selfOperations = [];\n    var nestedOperations = [];\n    if (!isVanillaObject(query)) {\n        selfOperations.push(new EqualsOperation(query, query, options));\n        return [selfOperations, nestedOperations];\n    }\n    for (var key in query) {\n        if (options.operations.hasOwnProperty(key)) {\n            var op = createNamedOperation(key, query[key], query, options);\n            if (op) {\n                if (!op.propop && parentKey && !options.operations[parentKey]) {\n                    throw new Error(\"Malformed query. \".concat(key, \" cannot be matched against property.\"));\n                }\n            }\n            // probably just a flag for another operation (like $options)\n            if (op != null) {\n                selfOperations.push(op);\n            }\n        }\n        else if (key.charAt(0) === \"$\") {\n            throwUnsupportedOperation(key);\n        }\n        else {\n            nestedOperations.push(createNestedOperation(key.split(\".\"), query[key], key, query, options));\n        }\n    }\n    return [selfOperations, nestedOperations];\n};\nvar createOperationTester = function (operation) {\n    return function (item, key, owner) {\n        operation.reset();\n        operation.next(item, key, owner);\n        return operation.keep;\n    };\n};\nvar createQueryTester = function (query, options) {\n    if (options === void 0) { options = {}; }\n    return createOperationTester(createQueryOperation(query, null, options));\n};\n\nvar $Ne = /** @class */ (function (_super) {\n    __extends($Ne, _super);\n    function $Ne() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.propop = true;\n        return _this;\n    }\n    $Ne.prototype.init = function () {\n        this._test = createTester(this.params, this.options.compare);\n    };\n    $Ne.prototype.reset = function () {\n        _super.prototype.reset.call(this);\n        this.keep = true;\n    };\n    $Ne.prototype.next = function (item) {\n        if (this._test(item)) {\n            this.done = true;\n            this.keep = false;\n        }\n    };\n    return $Ne;\n}(BaseOperation));\n// https://docs.mongodb.com/manual/reference/operator/query/elemMatch/\nvar $ElemMatch = /** @class */ (function (_super) {\n    __extends($ElemMatch, _super);\n    function $ElemMatch() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.propop = true;\n        return _this;\n    }\n    $ElemMatch.prototype.init = function () {\n        if (!this.params || typeof this.params !== \"object\") {\n            throw new Error(\"Malformed query. $elemMatch must by an object.\");\n        }\n        this._queryOperation = createQueryOperation(this.params, this.owneryQuery, this.options);\n    };\n    $ElemMatch.prototype.reset = function () {\n        _super.prototype.reset.call(this);\n        this._queryOperation.reset();\n    };\n    $ElemMatch.prototype.next = function (item) {\n        if (isArray(item)) {\n            for (var i = 0, length_1 = item.length; i < length_1; i++) {\n                // reset query operation since item being tested needs to pass _all_ query\n                // operations for it to be a success\n                this._queryOperation.reset();\n                var child = item[i];\n                this._queryOperation.next(child, i, item, false);\n                this.keep = this.keep || this._queryOperation.keep;\n            }\n            this.done = true;\n        }\n        else {\n            this.done = false;\n            this.keep = false;\n        }\n    };\n    return $ElemMatch;\n}(BaseOperation));\nvar $Not = /** @class */ (function (_super) {\n    __extends($Not, _super);\n    function $Not() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.propop = true;\n        return _this;\n    }\n    $Not.prototype.init = function () {\n        this._queryOperation = createQueryOperation(this.params, this.owneryQuery, this.options);\n    };\n    $Not.prototype.reset = function () {\n        _super.prototype.reset.call(this);\n        this._queryOperation.reset();\n    };\n    $Not.prototype.next = function (item, key, owner, root) {\n        this._queryOperation.next(item, key, owner, root);\n        this.done = this._queryOperation.done;\n        this.keep = !this._queryOperation.keep;\n    };\n    return $Not;\n}(BaseOperation));\nvar $Size = /** @class */ (function (_super) {\n    __extends($Size, _super);\n    function $Size() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.propop = true;\n        return _this;\n    }\n    $Size.prototype.init = function () { };\n    $Size.prototype.next = function (item) {\n        if (isArray(item) && item.length === this.params) {\n            this.done = true;\n            this.keep = true;\n        }\n        // if (parent && parent.length === this.params) {\n        //   this.done = true;\n        //   this.keep = true;\n        // }\n    };\n    return $Size;\n}(BaseOperation));\nvar assertGroupNotEmpty = function (values) {\n    if (values.length === 0) {\n        throw new Error(\"$and/$or/$nor must be a nonempty array\");\n    }\n};\nvar $Or = /** @class */ (function (_super) {\n    __extends($Or, _super);\n    function $Or() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.propop = false;\n        return _this;\n    }\n    $Or.prototype.init = function () {\n        var _this = this;\n        assertGroupNotEmpty(this.params);\n        this._ops = this.params.map(function (op) {\n            return createQueryOperation(op, null, _this.options);\n        });\n    };\n    $Or.prototype.reset = function () {\n        this.done = false;\n        this.keep = false;\n        for (var i = 0, length_2 = this._ops.length; i < length_2; i++) {\n            this._ops[i].reset();\n        }\n    };\n    $Or.prototype.next = function (item, key, owner) {\n        var done = false;\n        var success = false;\n        for (var i = 0, length_3 = this._ops.length; i < length_3; i++) {\n            var op = this._ops[i];\n            op.next(item, key, owner);\n            if (op.keep) {\n                done = true;\n                success = op.keep;\n                break;\n            }\n        }\n        this.keep = success;\n        this.done = done;\n    };\n    return $Or;\n}(BaseOperation));\nvar $Nor = /** @class */ (function (_super) {\n    __extends($Nor, _super);\n    function $Nor() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.propop = false;\n        return _this;\n    }\n    $Nor.prototype.next = function (item, key, owner) {\n        _super.prototype.next.call(this, item, key, owner);\n        this.keep = !this.keep;\n    };\n    return $Nor;\n}($Or));\nvar $In = /** @class */ (function (_super) {\n    __extends($In, _super);\n    function $In() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.propop = true;\n        return _this;\n    }\n    $In.prototype.init = function () {\n        var _this = this;\n        var params = Array.isArray(this.params) ? this.params : [this.params];\n        this._testers = params.map(function (value) {\n            if (containsOperation(value, _this.options)) {\n                throw new Error(\"cannot nest $ under \".concat(_this.name.toLowerCase()));\n            }\n            return createTester(value, _this.options.compare);\n        });\n    };\n    $In.prototype.next = function (item, key, owner) {\n        var done = false;\n        var success = false;\n        for (var i = 0, length_4 = this._testers.length; i < length_4; i++) {\n            var test = this._testers[i];\n            if (test(item)) {\n                done = true;\n                success = true;\n                break;\n            }\n        }\n        this.keep = success;\n        this.done = done;\n    };\n    return $In;\n}(BaseOperation));\nvar $Nin = /** @class */ (function (_super) {\n    __extends($Nin, _super);\n    function $Nin(params, ownerQuery, options, name) {\n        var _this = _super.call(this, params, ownerQuery, options, name) || this;\n        _this.propop = true;\n        _this._in = new $In(params, ownerQuery, options, name);\n        return _this;\n    }\n    $Nin.prototype.next = function (item, key, owner, root) {\n        this._in.next(item, key, owner);\n        if (isArray(owner) && !root) {\n            if (this._in.keep) {\n                this.keep = false;\n                this.done = true;\n            }\n            else if (key == owner.length - 1) {\n                this.keep = true;\n                this.done = true;\n            }\n        }\n        else {\n            this.keep = !this._in.keep;\n            this.done = true;\n        }\n    };\n    $Nin.prototype.reset = function () {\n        _super.prototype.reset.call(this);\n        this._in.reset();\n    };\n    return $Nin;\n}(BaseOperation));\nvar $Exists = /** @class */ (function (_super) {\n    __extends($Exists, _super);\n    function $Exists() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.propop = true;\n        return _this;\n    }\n    $Exists.prototype.next = function (item, key, owner, root, leaf) {\n        if (!leaf) {\n            this.done = true;\n            this.keep = !this.params;\n        }\n        else if (owner.hasOwnProperty(key) === this.params) {\n            this.done = true;\n            this.keep = true;\n        }\n    };\n    return $Exists;\n}(BaseOperation));\nvar $And = /** @class */ (function (_super) {\n    __extends($And, _super);\n    function $And(params, owneryQuery, options, name) {\n        var _this = _super.call(this, params, owneryQuery, options, params.map(function (query) { return createQueryOperation(query, owneryQuery, options); }), name) || this;\n        _this.propop = false;\n        assertGroupNotEmpty(params);\n        return _this;\n    }\n    $And.prototype.next = function (item, key, owner, root) {\n        this.childrenNext(item, key, owner, root);\n    };\n    return $And;\n}(NamedGroupOperation));\nvar $All = /** @class */ (function (_super) {\n    __extends($All, _super);\n    function $All(params, owneryQuery, options, name) {\n        var _this = _super.call(this, params, owneryQuery, options, params.map(function (query) { return createQueryOperation(query, owneryQuery, options); }), name) || this;\n        _this.propop = true;\n        return _this;\n    }\n    $All.prototype.next = function (item, key, owner, root) {\n        this.childrenNext(item, key, owner, root);\n    };\n    return $All;\n}(NamedGroupOperation));\nvar $eq = function (params, owneryQuery, options) {\n    return new EqualsOperation(params, owneryQuery, options);\n};\nvar $ne = function (params, owneryQuery, options, name) { return new $Ne(params, owneryQuery, options, name); };\nvar $or = function (params, owneryQuery, options, name) { return new $Or(params, owneryQuery, options, name); };\nvar $nor = function (params, owneryQuery, options, name) { return new $Nor(params, owneryQuery, options, name); };\nvar $elemMatch = function (params, owneryQuery, options, name) { return new $ElemMatch(params, owneryQuery, options, name); };\nvar $nin = function (params, owneryQuery, options, name) { return new $Nin(params, owneryQuery, options, name); };\nvar $in = function (params, owneryQuery, options, name) {\n    return new $In(params, owneryQuery, options, name);\n};\nvar $lt = numericalOperation(function (params) { return function (b) {\n    return b != null && b < params;\n}; });\nvar $lte = numericalOperation(function (params) { return function (b) {\n    return b === params || b <= params;\n}; });\nvar $gt = numericalOperation(function (params) { return function (b) {\n    return b != null && b > params;\n}; });\nvar $gte = numericalOperation(function (params) { return function (b) {\n    return b === params || b >= params;\n}; });\nvar $mod = function (_a, owneryQuery, options) {\n    var mod = _a[0], equalsValue = _a[1];\n    return new EqualsOperation(function (b) { return comparable(b) % mod === equalsValue; }, owneryQuery, options);\n};\nvar $exists = function (params, owneryQuery, options, name) { return new $Exists(params, owneryQuery, options, name); };\nvar $regex = function (pattern, owneryQuery, options) {\n    return new EqualsOperation(new RegExp(pattern, owneryQuery.$options), owneryQuery, options);\n};\nvar $not = function (params, owneryQuery, options, name) { return new $Not(params, owneryQuery, options, name); };\nvar typeAliases = {\n    number: function (v) { return typeof v === \"number\"; },\n    string: function (v) { return typeof v === \"string\"; },\n    bool: function (v) { return typeof v === \"boolean\"; },\n    array: function (v) { return Array.isArray(v); },\n    null: function (v) { return v === null; },\n    timestamp: function (v) { return v instanceof Date; },\n};\nvar $type = function (clazz, owneryQuery, options) {\n    return new EqualsOperation(function (b) {\n        if (typeof clazz === \"string\") {\n            if (!typeAliases[clazz]) {\n                throw new Error(\"Type alias does not exist\");\n            }\n            return typeAliases[clazz](b);\n        }\n        return b != null ? b instanceof clazz || b.constructor === clazz : false;\n    }, owneryQuery, options);\n};\nvar $and = function (params, ownerQuery, options, name) { return new $And(params, ownerQuery, options, name); };\nvar $all = function (params, ownerQuery, options, name) { return new $All(params, ownerQuery, options, name); };\nvar $size = function (params, ownerQuery, options) { return new $Size(params, ownerQuery, options, \"$size\"); };\nvar $options = function () { return null; };\nvar $where = function (params, ownerQuery, options) {\n    var test;\n    if (isFunction(params)) {\n        test = params;\n    }\n    else if (!process.env.CSP_ENABLED) {\n        test = new Function(\"obj\", \"return \" + params);\n    }\n    else {\n        throw new Error(\"In CSP mode, sift does not support strings in \\\"$where\\\" condition\");\n    }\n    return new EqualsOperation(function (b) { return test.bind(b)(b); }, ownerQuery, options);\n};\n\nvar defaultOperations = /*#__PURE__*/Object.freeze({\n    __proto__: null,\n    $Size: $Size,\n    $all: $all,\n    $and: $and,\n    $elemMatch: $elemMatch,\n    $eq: $eq,\n    $exists: $exists,\n    $gt: $gt,\n    $gte: $gte,\n    $in: $in,\n    $lt: $lt,\n    $lte: $lte,\n    $mod: $mod,\n    $ne: $ne,\n    $nin: $nin,\n    $nor: $nor,\n    $not: $not,\n    $options: $options,\n    $or: $or,\n    $regex: $regex,\n    $size: $size,\n    $type: $type,\n    $where: $where\n});\n\nvar createDefaultQueryOperation = function (query, ownerQuery, _a) {\n    var _b = _a === void 0 ? {} : _a, compare = _b.compare, operations = _b.operations;\n    return createQueryOperation(query, ownerQuery, {\n        compare: compare,\n        operations: Object.assign({}, defaultOperations, operations || {}),\n    });\n};\nvar createDefaultQueryTester = function (query, options) {\n    if (options === void 0) { options = {}; }\n    var op = createDefaultQueryOperation(query, null, options);\n    return createOperationTester(op);\n};\n\n\n//# sourceMappingURL=index.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvc2lmdC9lczVtL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxnQkFBZ0Isc0NBQXNDLGtCQUFrQjtBQUNuRiwwQkFBMEI7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0I7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0VBQWtFLGVBQWU7QUFDakYsaUVBQWlFLGVBQWU7QUFDaEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMsY0FBYztBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxLQUFLLG9CQUFvQjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsZ0JBQWdCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCxjQUFjO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQXlELGNBQWM7QUFDdkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlEQUF5RCxjQUFjO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELHNFQUFzRTtBQUN0RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDO0FBQ2xDLGdDQUFnQztBQUNoQztBQUNBO0FBQ0Esb0NBQW9DLGtCQUFrQjtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QjtBQUM5QjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0RBQW9ELGNBQWM7QUFDbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFEQUFxRCxjQUFjO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFEQUFxRCxjQUFjO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQXlELGNBQWM7QUFDdkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLGtHQUFrRywyREFBMkQ7QUFDN0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxrR0FBa0csMkRBQTJEO0FBQzdKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLDBEQUEwRDtBQUMxRCwwREFBMEQ7QUFDMUQsMkRBQTJEO0FBQzNELGlFQUFpRTtBQUNqRSwyREFBMkQ7QUFDM0Q7QUFDQTtBQUNBO0FBQ0EsaURBQWlEO0FBQ2pEO0FBQ0EsSUFBSTtBQUNKLGtEQUFrRDtBQUNsRDtBQUNBLElBQUk7QUFDSixpREFBaUQ7QUFDakQ7QUFDQSxJQUFJO0FBQ0osa0RBQWtEO0FBQ2xEO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSw4Q0FBOEMsNkNBQTZDO0FBQzNGO0FBQ0EsOERBQThEO0FBQzlEO0FBQ0E7QUFDQTtBQUNBLDJEQUEyRDtBQUMzRDtBQUNBLDJCQUEyQiwrQkFBK0I7QUFDMUQsMkJBQTJCLCtCQUErQjtBQUMxRCx5QkFBeUIsZ0NBQWdDO0FBQ3pELDBCQUEwQiwwQkFBMEI7QUFDcEQseUJBQXlCLG9CQUFvQjtBQUM3Qyw4QkFBOEIsMkJBQTJCO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsMERBQTBEO0FBQzFELDBEQUEwRDtBQUMxRCxxREFBcUQ7QUFDckQsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEMseUJBQXlCO0FBQ3ZFOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQSxnQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBLG9DQUFvQyxxQ0FBcUM7QUFDekUsS0FBSztBQUNMO0FBQ0E7QUFDQSw4QkFBOEI7QUFDOUI7QUFDQTtBQUNBOztBQUVzVTtBQUN0VSIsInNvdXJjZXMiOlsiL1VzZXJzL3lhbWFkb3JpL21lZXRpbmctc2xpZGVzLWFpL25vZGVfbW9kdWxlcy9zaWZ0L2VzNW0vaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi5cclxuXHJcblBlcm1pc3Npb24gdG8gdXNlLCBjb3B5LCBtb2RpZnksIGFuZC9vciBkaXN0cmlidXRlIHRoaXMgc29mdHdhcmUgZm9yIGFueVxyXG5wdXJwb3NlIHdpdGggb3Igd2l0aG91dCBmZWUgaXMgaGVyZWJ5IGdyYW50ZWQuXHJcblxyXG5USEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiIEFORCBUSEUgQVVUSE9SIERJU0NMQUlNUyBBTEwgV0FSUkFOVElFUyBXSVRIXHJcblJFR0FSRCBUTyBUSElTIFNPRlRXQVJFIElOQ0xVRElORyBBTEwgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWVxyXG5BTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsXHJcbklORElSRUNULCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgT1IgQU5ZIERBTUFHRVMgV0hBVFNPRVZFUiBSRVNVTFRJTkcgRlJPTVxyXG5MT1NTIE9GIFVTRSwgREFUQSBPUiBQUk9GSVRTLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgTkVHTElHRU5DRSBPUlxyXG5PVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SXHJcblBFUkZPUk1BTkNFIE9GIFRISVMgU09GVFdBUkUuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXHJcbi8qIGdsb2JhbCBSZWZsZWN0LCBQcm9taXNlLCBTdXBwcmVzc2VkRXJyb3IsIFN5bWJvbCAqL1xyXG5cclxudmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbihkLCBiKSB7XHJcbiAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxufTtcclxuXHJcbmZ1bmN0aW9uIF9fZXh0ZW5kcyhkLCBiKSB7XHJcbiAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxyXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcclxuICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxufVxyXG5cclxudHlwZW9mIFN1cHByZXNzZWRFcnJvciA9PT0gXCJmdW5jdGlvblwiID8gU3VwcHJlc3NlZEVycm9yIDogZnVuY3Rpb24gKGVycm9yLCBzdXBwcmVzc2VkLCBtZXNzYWdlKSB7XHJcbiAgICB2YXIgZSA9IG5ldyBFcnJvcihtZXNzYWdlKTtcclxuICAgIHJldHVybiBlLm5hbWUgPSBcIlN1cHByZXNzZWRFcnJvclwiLCBlLmVycm9yID0gZXJyb3IsIGUuc3VwcHJlc3NlZCA9IHN1cHByZXNzZWQsIGU7XHJcbn07XG5cbnZhciB0eXBlQ2hlY2tlciA9IGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgdmFyIHR5cGVTdHJpbmcgPSBcIltvYmplY3QgXCIgKyB0eXBlICsgXCJdXCI7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gZ2V0Q2xhc3NOYW1lKHZhbHVlKSA9PT0gdHlwZVN0cmluZztcbiAgICB9O1xufTtcbnZhciBnZXRDbGFzc05hbWUgPSBmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSk7IH07XG52YXIgY29tcGFyYWJsZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlLmdldFRpbWUoKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlLm1hcChjb21wYXJhYmxlKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodmFsdWUgJiYgdHlwZW9mIHZhbHVlLnRvSlNPTiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZS50b0pTT04oKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xufTtcbnZhciBjb2VyY2VQb3RlbnRpYWxseU51bGwgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgPT0gbnVsbCA/IG51bGwgOiB2YWx1ZTtcbn07XG52YXIgaXNBcnJheSA9IHR5cGVDaGVja2VyKFwiQXJyYXlcIik7XG52YXIgaXNPYmplY3QgPSB0eXBlQ2hlY2tlcihcIk9iamVjdFwiKTtcbnZhciBpc0Z1bmN0aW9uID0gdHlwZUNoZWNrZXIoXCJGdW5jdGlvblwiKTtcbnZhciBpc1Byb3BlcnR5ID0gZnVuY3Rpb24gKGl0ZW0sIGtleSkge1xuICAgIHJldHVybiBpdGVtLmhhc093blByb3BlcnR5KGtleSkgJiYgIWlzRnVuY3Rpb24oaXRlbVtrZXldKTtcbn07XG52YXIgaXNWYW5pbGxhT2JqZWN0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgcmV0dXJuICh2YWx1ZSAmJlxuICAgICAgICAodmFsdWUuY29uc3RydWN0b3IgPT09IE9iamVjdCB8fFxuICAgICAgICAgICAgdmFsdWUuY29uc3RydWN0b3IgPT09IEFycmF5IHx8XG4gICAgICAgICAgICB2YWx1ZS5jb25zdHJ1Y3Rvci50b1N0cmluZygpID09PSBcImZ1bmN0aW9uIE9iamVjdCgpIHsgW25hdGl2ZSBjb2RlXSB9XCIgfHxcbiAgICAgICAgICAgIHZhbHVlLmNvbnN0cnVjdG9yLnRvU3RyaW5nKCkgPT09IFwiZnVuY3Rpb24gQXJyYXkoKSB7IFtuYXRpdmUgY29kZV0gfVwiKSAmJlxuICAgICAgICAhdmFsdWUudG9KU09OKTtcbn07XG52YXIgZXF1YWxzID0gZnVuY3Rpb24gKGEsIGIpIHtcbiAgICBpZiAoYSA9PSBudWxsICYmIGEgPT0gYikge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKGEgPT09IGIpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYSkgIT09IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChiKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChpc0FycmF5KGEpKSB7XG4gICAgICAgIGlmIChhLmxlbmd0aCAhPT0gYi5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoXzEgPSBhLmxlbmd0aDsgaSA8IGxlbmd0aF8xOyBpKyspIHtcbiAgICAgICAgICAgIGlmICghZXF1YWxzKGFbaV0sIGJbaV0pKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNPYmplY3QoYSkpIHtcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKGEpLmxlbmd0aCAhPT0gT2JqZWN0LmtleXMoYikubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIga2V5IGluIGEpIHtcbiAgICAgICAgICAgIGlmICghZXF1YWxzKGFba2V5XSwgYltrZXldKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn07XG5cbi8qKlxuICogV2Fsa3MgdGhyb3VnaCBlYWNoIHZhbHVlIGdpdmVuIHRoZSBjb250ZXh0IC0gdXNlZCBmb3IgbmVzdGVkIG9wZXJhdGlvbnMuIEUuZzpcbiAqIHsgXCJwZXJzb24uYWRkcmVzc1wiOiB7ICRlcTogXCJibGFyZ1wiIH19XG4gKi9cbnZhciB3YWxrS2V5UGF0aFZhbHVlcyA9IGZ1bmN0aW9uIChpdGVtLCBrZXlQYXRoLCBuZXh0LCBkZXB0aCwga2V5LCBvd25lcikge1xuICAgIHZhciBjdXJyZW50S2V5ID0ga2V5UGF0aFtkZXB0aF07XG4gICAgLy8gaWYgYXJyYXksIHRoZW4gdHJ5IG1hdGNoaW5nLiBNaWdodCBmYWxsIHRocm91Z2ggZm9yIGNhc2VzIGxpa2U6XG4gICAgLy8geyAkZXE6IFsxLCAyLCAzXSB9LCBbIDEsIDIsIDMgXS5cbiAgICBpZiAoaXNBcnJheShpdGVtKSAmJlxuICAgICAgICBpc05hTihOdW1iZXIoY3VycmVudEtleSkpICYmXG4gICAgICAgICFpc1Byb3BlcnR5KGl0ZW0sIGN1cnJlbnRLZXkpKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IGl0ZW0ubGVuZ3RoOyBpIDwgbGVuZ3RoXzE7IGkrKykge1xuICAgICAgICAgICAgLy8gaWYgRkFMU0UgaXMgcmV0dXJuZWQsIHRoZW4gdGVybWluYXRlIHdhbGtlci4gRm9yIG9wZXJhdGlvbnMsIHRoaXMgc2ltcGx5XG4gICAgICAgICAgICAvLyBtZWFucyB0aGF0IHRoZSBzZWFyY2ggY3JpdGVyYSB3YXMgbWV0LlxuICAgICAgICAgICAgaWYgKCF3YWxrS2V5UGF0aFZhbHVlcyhpdGVtW2ldLCBrZXlQYXRoLCBuZXh0LCBkZXB0aCwgaSwgaXRlbSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGRlcHRoID09PSBrZXlQYXRoLmxlbmd0aCB8fCBpdGVtID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIG5leHQoaXRlbSwga2V5LCBvd25lciwgZGVwdGggPT09IDAsIGRlcHRoID09PSBrZXlQYXRoLmxlbmd0aCk7XG4gICAgfVxuICAgIHJldHVybiB3YWxrS2V5UGF0aFZhbHVlcyhpdGVtW2N1cnJlbnRLZXldLCBrZXlQYXRoLCBuZXh0LCBkZXB0aCArIDEsIGN1cnJlbnRLZXksIGl0ZW0pO1xufTtcbnZhciBCYXNlT3BlcmF0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEJhc2VPcGVyYXRpb24ocGFyYW1zLCBvd25lcnlRdWVyeSwgb3B0aW9ucywgbmFtZSkge1xuICAgICAgICB0aGlzLnBhcmFtcyA9IHBhcmFtcztcbiAgICAgICAgdGhpcy5vd25lcnlRdWVyeSA9IG93bmVyeVF1ZXJ5O1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLmluaXQoKTtcbiAgICB9XG4gICAgQmFzZU9wZXJhdGlvbi5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uICgpIHsgfTtcbiAgICBCYXNlT3BlcmF0aW9uLnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5kb25lID0gZmFsc2U7XG4gICAgICAgIHRoaXMua2VlcCA9IGZhbHNlO1xuICAgIH07XG4gICAgcmV0dXJuIEJhc2VPcGVyYXRpb247XG59KCkpO1xudmFyIEdyb3VwT3BlcmF0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhHcm91cE9wZXJhdGlvbiwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBHcm91cE9wZXJhdGlvbihwYXJhbXMsIG93bmVyeVF1ZXJ5LCBvcHRpb25zLCBjaGlsZHJlbikge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwYXJhbXMsIG93bmVyeVF1ZXJ5LCBvcHRpb25zKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5jaGlsZHJlbiA9IGNoaWxkcmVuO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqL1xuICAgIEdyb3VwT3BlcmF0aW9uLnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5rZWVwID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZG9uZSA9IGZhbHNlO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoXzIgPSB0aGlzLmNoaWxkcmVuLmxlbmd0aDsgaSA8IGxlbmd0aF8yOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuY2hpbGRyZW5baV0ucmVzZXQoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICovXG4gICAgR3JvdXBPcGVyYXRpb24ucHJvdG90eXBlLmNoaWxkcmVuTmV4dCA9IGZ1bmN0aW9uIChpdGVtLCBrZXksIG93bmVyLCByb290LCBsZWFmKSB7XG4gICAgICAgIHZhciBkb25lID0gdHJ1ZTtcbiAgICAgICAgdmFyIGtlZXAgPSB0cnVlO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoXzMgPSB0aGlzLmNoaWxkcmVuLmxlbmd0aDsgaSA8IGxlbmd0aF8zOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBjaGlsZE9wZXJhdGlvbiA9IHRoaXMuY2hpbGRyZW5baV07XG4gICAgICAgICAgICBpZiAoIWNoaWxkT3BlcmF0aW9uLmRvbmUpIHtcbiAgICAgICAgICAgICAgICBjaGlsZE9wZXJhdGlvbi5uZXh0KGl0ZW0sIGtleSwgb3duZXIsIHJvb3QsIGxlYWYpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFjaGlsZE9wZXJhdGlvbi5rZWVwKSB7XG4gICAgICAgICAgICAgICAga2VlcCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNoaWxkT3BlcmF0aW9uLmRvbmUpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWNoaWxkT3BlcmF0aW9uLmtlZXApIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZG9uZSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuZG9uZSA9IGRvbmU7XG4gICAgICAgIHRoaXMua2VlcCA9IGtlZXA7XG4gICAgfTtcbiAgICByZXR1cm4gR3JvdXBPcGVyYXRpb247XG59KEJhc2VPcGVyYXRpb24pKTtcbnZhciBOYW1lZEdyb3VwT3BlcmF0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhOYW1lZEdyb3VwT3BlcmF0aW9uLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIE5hbWVkR3JvdXBPcGVyYXRpb24ocGFyYW1zLCBvd25lcnlRdWVyeSwgb3B0aW9ucywgY2hpbGRyZW4sIG5hbWUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcGFyYW1zLCBvd25lcnlRdWVyeSwgb3B0aW9ucywgY2hpbGRyZW4pIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIHJldHVybiBOYW1lZEdyb3VwT3BlcmF0aW9uO1xufShHcm91cE9wZXJhdGlvbikpO1xudmFyIFF1ZXJ5T3BlcmF0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhRdWVyeU9wZXJhdGlvbiwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBRdWVyeU9wZXJhdGlvbigpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLnByb3BvcCA9IHRydWU7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICovXG4gICAgUXVlcnlPcGVyYXRpb24ucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoaXRlbSwga2V5LCBwYXJlbnQsIHJvb3QpIHtcbiAgICAgICAgdGhpcy5jaGlsZHJlbk5leHQoaXRlbSwga2V5LCBwYXJlbnQsIHJvb3QpO1xuICAgIH07XG4gICAgcmV0dXJuIFF1ZXJ5T3BlcmF0aW9uO1xufShHcm91cE9wZXJhdGlvbikpO1xudmFyIE5lc3RlZE9wZXJhdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTmVzdGVkT3BlcmF0aW9uLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIE5lc3RlZE9wZXJhdGlvbihrZXlQYXRoLCBwYXJhbXMsIG93bmVyeVF1ZXJ5LCBvcHRpb25zLCBjaGlsZHJlbikge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwYXJhbXMsIG93bmVyeVF1ZXJ5LCBvcHRpb25zLCBjaGlsZHJlbikgfHwgdGhpcztcbiAgICAgICAgX3RoaXMua2V5UGF0aCA9IGtleVBhdGg7XG4gICAgICAgIF90aGlzLnByb3BvcCA9IHRydWU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuX25leHROZXN0ZWRWYWx1ZSA9IGZ1bmN0aW9uICh2YWx1ZSwga2V5LCBvd25lciwgcm9vdCwgbGVhZikge1xuICAgICAgICAgICAgX3RoaXMuY2hpbGRyZW5OZXh0KHZhbHVlLCBrZXksIG93bmVyLCByb290LCBsZWFmKTtcbiAgICAgICAgICAgIHJldHVybiAhX3RoaXMuZG9uZTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKi9cbiAgICBOZXN0ZWRPcGVyYXRpb24ucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoaXRlbSwga2V5LCBwYXJlbnQpIHtcbiAgICAgICAgd2Fsa0tleVBhdGhWYWx1ZXMoaXRlbSwgdGhpcy5rZXlQYXRoLCB0aGlzLl9uZXh0TmVzdGVkVmFsdWUsIDAsIGtleSwgcGFyZW50KTtcbiAgICB9O1xuICAgIHJldHVybiBOZXN0ZWRPcGVyYXRpb247XG59KEdyb3VwT3BlcmF0aW9uKSk7XG52YXIgY3JlYXRlVGVzdGVyID0gZnVuY3Rpb24gKGEsIGNvbXBhcmUpIHtcbiAgICBpZiAoYSBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XG4gICAgICAgIHJldHVybiBhO1xuICAgIH1cbiAgICBpZiAoYSBpbnN0YW5jZW9mIFJlZ0V4cCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGIpIHtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSB0eXBlb2YgYiA9PT0gXCJzdHJpbmdcIiAmJiBhLnRlc3QoYik7XG4gICAgICAgICAgICBhLmxhc3RJbmRleCA9IDA7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9O1xuICAgIH1cbiAgICB2YXIgY29tcGFyYWJsZUEgPSBjb21wYXJhYmxlKGEpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoYikgeyByZXR1cm4gY29tcGFyZShjb21wYXJhYmxlQSwgY29tcGFyYWJsZShiKSk7IH07XG59O1xudmFyIEVxdWFsc09wZXJhdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRXF1YWxzT3BlcmF0aW9uLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEVxdWFsc09wZXJhdGlvbigpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLnByb3BvcCA9IHRydWU7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgRXF1YWxzT3BlcmF0aW9uLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLl90ZXN0ID0gY3JlYXRlVGVzdGVyKHRoaXMucGFyYW1zLCB0aGlzLm9wdGlvbnMuY29tcGFyZSk7XG4gICAgfTtcbiAgICBFcXVhbHNPcGVyYXRpb24ucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoaXRlbSwga2V5LCBwYXJlbnQpIHtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHBhcmVudCkgfHwgcGFyZW50Lmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl90ZXN0KGl0ZW0sIGtleSwgcGFyZW50KSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZG9uZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5rZWVwID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIEVxdWFsc09wZXJhdGlvbjtcbn0oQmFzZU9wZXJhdGlvbikpO1xudmFyIGNyZWF0ZUVxdWFsc09wZXJhdGlvbiA9IGZ1bmN0aW9uIChwYXJhbXMsIG93bmVyeVF1ZXJ5LCBvcHRpb25zKSB7IHJldHVybiBuZXcgRXF1YWxzT3BlcmF0aW9uKHBhcmFtcywgb3duZXJ5UXVlcnksIG9wdGlvbnMpOyB9O1xudmFyIG51bWVyaWNhbE9wZXJhdGlvbkNyZWF0b3IgPSBmdW5jdGlvbiAoY3JlYXRlTnVtZXJpY2FsT3BlcmF0aW9uKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChwYXJhbXMsIG93bmVyeVF1ZXJ5LCBvcHRpb25zLCBuYW1lKSB7XG4gICAgICAgIHJldHVybiBjcmVhdGVOdW1lcmljYWxPcGVyYXRpb24ocGFyYW1zLCBvd25lcnlRdWVyeSwgb3B0aW9ucywgbmFtZSk7XG4gICAgfTtcbn07XG52YXIgbnVtZXJpY2FsT3BlcmF0aW9uID0gZnVuY3Rpb24gKGNyZWF0ZVRlc3Rlcikge1xuICAgIHJldHVybiBudW1lcmljYWxPcGVyYXRpb25DcmVhdG9yKGZ1bmN0aW9uIChwYXJhbXMsIG93bmVyeVF1ZXJ5LCBvcHRpb25zLCBuYW1lKSB7XG4gICAgICAgIHZhciB0eXBlb2ZQYXJhbXMgPSB0eXBlb2YgY29tcGFyYWJsZShwYXJhbXMpO1xuICAgICAgICB2YXIgdGVzdCA9IGNyZWF0ZVRlc3RlcihwYXJhbXMpO1xuICAgICAgICByZXR1cm4gbmV3IEVxdWFsc09wZXJhdGlvbihmdW5jdGlvbiAoYikge1xuICAgICAgICAgICAgdmFyIGFjdHVhbFZhbHVlID0gY29lcmNlUG90ZW50aWFsbHlOdWxsKGIpO1xuICAgICAgICAgICAgcmV0dXJuICh0eXBlb2YgY29tcGFyYWJsZShhY3R1YWxWYWx1ZSkgPT09IHR5cGVvZlBhcmFtcyAmJiB0ZXN0KGFjdHVhbFZhbHVlKSk7XG4gICAgICAgIH0sIG93bmVyeVF1ZXJ5LCBvcHRpb25zLCBuYW1lKTtcbiAgICB9KTtcbn07XG52YXIgY3JlYXRlTmFtZWRPcGVyYXRpb24gPSBmdW5jdGlvbiAobmFtZSwgcGFyYW1zLCBwYXJlbnRRdWVyeSwgb3B0aW9ucykge1xuICAgIHZhciBvcGVyYXRpb25DcmVhdG9yID0gb3B0aW9ucy5vcGVyYXRpb25zW25hbWVdO1xuICAgIGlmICghb3BlcmF0aW9uQ3JlYXRvcikge1xuICAgICAgICB0aHJvd1Vuc3VwcG9ydGVkT3BlcmF0aW9uKG5hbWUpO1xuICAgIH1cbiAgICByZXR1cm4gb3BlcmF0aW9uQ3JlYXRvcihwYXJhbXMsIHBhcmVudFF1ZXJ5LCBvcHRpb25zLCBuYW1lKTtcbn07XG52YXIgdGhyb3dVbnN1cHBvcnRlZE9wZXJhdGlvbiA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiVW5zdXBwb3J0ZWQgb3BlcmF0aW9uOiBcIi5jb25jYXQobmFtZSkpO1xufTtcbnZhciBjb250YWluc09wZXJhdGlvbiA9IGZ1bmN0aW9uIChxdWVyeSwgb3B0aW9ucykge1xuICAgIGZvciAodmFyIGtleSBpbiBxdWVyeSkge1xuICAgICAgICBpZiAob3B0aW9ucy5vcGVyYXRpb25zLmhhc093blByb3BlcnR5KGtleSkgfHwga2V5LmNoYXJBdCgwKSA9PT0gXCIkXCIpXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufTtcbnZhciBjcmVhdGVOZXN0ZWRPcGVyYXRpb24gPSBmdW5jdGlvbiAoa2V5UGF0aCwgbmVzdGVkUXVlcnksIHBhcmVudEtleSwgb3duZXJ5UXVlcnksIG9wdGlvbnMpIHtcbiAgICBpZiAoY29udGFpbnNPcGVyYXRpb24obmVzdGVkUXVlcnksIG9wdGlvbnMpKSB7XG4gICAgICAgIHZhciBfYSA9IGNyZWF0ZVF1ZXJ5T3BlcmF0aW9ucyhuZXN0ZWRRdWVyeSwgcGFyZW50S2V5LCBvcHRpb25zKSwgc2VsZk9wZXJhdGlvbnMgPSBfYVswXSwgbmVzdGVkT3BlcmF0aW9ucyA9IF9hWzFdO1xuICAgICAgICBpZiAobmVzdGVkT3BlcmF0aW9ucy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlByb3BlcnR5IHF1ZXJpZXMgbXVzdCBjb250YWluIG9ubHkgb3BlcmF0aW9ucywgb3IgZXhhY3Qgb2JqZWN0cy5cIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBOZXN0ZWRPcGVyYXRpb24oa2V5UGF0aCwgbmVzdGVkUXVlcnksIG93bmVyeVF1ZXJ5LCBvcHRpb25zLCBzZWxmT3BlcmF0aW9ucyk7XG4gICAgfVxuICAgIHJldHVybiBuZXcgTmVzdGVkT3BlcmF0aW9uKGtleVBhdGgsIG5lc3RlZFF1ZXJ5LCBvd25lcnlRdWVyeSwgb3B0aW9ucywgW1xuICAgICAgICBuZXcgRXF1YWxzT3BlcmF0aW9uKG5lc3RlZFF1ZXJ5LCBvd25lcnlRdWVyeSwgb3B0aW9ucyksXG4gICAgXSk7XG59O1xudmFyIGNyZWF0ZVF1ZXJ5T3BlcmF0aW9uID0gZnVuY3Rpb24gKHF1ZXJ5LCBvd25lcnlRdWVyeSwgX2EpIHtcbiAgICBpZiAob3duZXJ5UXVlcnkgPT09IHZvaWQgMCkgeyBvd25lcnlRdWVyeSA9IG51bGw7IH1cbiAgICB2YXIgX2IgPSBfYSA9PT0gdm9pZCAwID8ge30gOiBfYSwgY29tcGFyZSA9IF9iLmNvbXBhcmUsIG9wZXJhdGlvbnMgPSBfYi5vcGVyYXRpb25zO1xuICAgIHZhciBvcHRpb25zID0ge1xuICAgICAgICBjb21wYXJlOiBjb21wYXJlIHx8IGVxdWFscyxcbiAgICAgICAgb3BlcmF0aW9uczogT2JqZWN0LmFzc2lnbih7fSwgb3BlcmF0aW9ucyB8fCB7fSksXG4gICAgfTtcbiAgICB2YXIgX2MgPSBjcmVhdGVRdWVyeU9wZXJhdGlvbnMocXVlcnksIG51bGwsIG9wdGlvbnMpLCBzZWxmT3BlcmF0aW9ucyA9IF9jWzBdLCBuZXN0ZWRPcGVyYXRpb25zID0gX2NbMV07XG4gICAgdmFyIG9wcyA9IFtdO1xuICAgIGlmIChzZWxmT3BlcmF0aW9ucy5sZW5ndGgpIHtcbiAgICAgICAgb3BzLnB1c2gobmV3IE5lc3RlZE9wZXJhdGlvbihbXSwgcXVlcnksIG93bmVyeVF1ZXJ5LCBvcHRpb25zLCBzZWxmT3BlcmF0aW9ucykpO1xuICAgIH1cbiAgICBvcHMucHVzaC5hcHBseShvcHMsIG5lc3RlZE9wZXJhdGlvbnMpO1xuICAgIGlmIChvcHMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIHJldHVybiBvcHNbMF07XG4gICAgfVxuICAgIHJldHVybiBuZXcgUXVlcnlPcGVyYXRpb24ocXVlcnksIG93bmVyeVF1ZXJ5LCBvcHRpb25zLCBvcHMpO1xufTtcbnZhciBjcmVhdGVRdWVyeU9wZXJhdGlvbnMgPSBmdW5jdGlvbiAocXVlcnksIHBhcmVudEtleSwgb3B0aW9ucykge1xuICAgIHZhciBzZWxmT3BlcmF0aW9ucyA9IFtdO1xuICAgIHZhciBuZXN0ZWRPcGVyYXRpb25zID0gW107XG4gICAgaWYgKCFpc1ZhbmlsbGFPYmplY3QocXVlcnkpKSB7XG4gICAgICAgIHNlbGZPcGVyYXRpb25zLnB1c2gobmV3IEVxdWFsc09wZXJhdGlvbihxdWVyeSwgcXVlcnksIG9wdGlvbnMpKTtcbiAgICAgICAgcmV0dXJuIFtzZWxmT3BlcmF0aW9ucywgbmVzdGVkT3BlcmF0aW9uc107XG4gICAgfVxuICAgIGZvciAodmFyIGtleSBpbiBxdWVyeSkge1xuICAgICAgICBpZiAob3B0aW9ucy5vcGVyYXRpb25zLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgIHZhciBvcCA9IGNyZWF0ZU5hbWVkT3BlcmF0aW9uKGtleSwgcXVlcnlba2V5XSwgcXVlcnksIG9wdGlvbnMpO1xuICAgICAgICAgICAgaWYgKG9wKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFvcC5wcm9wb3AgJiYgcGFyZW50S2V5ICYmICFvcHRpb25zLm9wZXJhdGlvbnNbcGFyZW50S2V5XSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNYWxmb3JtZWQgcXVlcnkuIFwiLmNvbmNhdChrZXksIFwiIGNhbm5vdCBiZSBtYXRjaGVkIGFnYWluc3QgcHJvcGVydHkuXCIpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBwcm9iYWJseSBqdXN0IGEgZmxhZyBmb3IgYW5vdGhlciBvcGVyYXRpb24gKGxpa2UgJG9wdGlvbnMpXG4gICAgICAgICAgICBpZiAob3AgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHNlbGZPcGVyYXRpb25zLnB1c2gob3ApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGtleS5jaGFyQXQoMCkgPT09IFwiJFwiKSB7XG4gICAgICAgICAgICB0aHJvd1Vuc3VwcG9ydGVkT3BlcmF0aW9uKGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBuZXN0ZWRPcGVyYXRpb25zLnB1c2goY3JlYXRlTmVzdGVkT3BlcmF0aW9uKGtleS5zcGxpdChcIi5cIiksIHF1ZXJ5W2tleV0sIGtleSwgcXVlcnksIG9wdGlvbnMpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gW3NlbGZPcGVyYXRpb25zLCBuZXN0ZWRPcGVyYXRpb25zXTtcbn07XG52YXIgY3JlYXRlT3BlcmF0aW9uVGVzdGVyID0gZnVuY3Rpb24gKG9wZXJhdGlvbikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoaXRlbSwga2V5LCBvd25lcikge1xuICAgICAgICBvcGVyYXRpb24ucmVzZXQoKTtcbiAgICAgICAgb3BlcmF0aW9uLm5leHQoaXRlbSwga2V5LCBvd25lcik7XG4gICAgICAgIHJldHVybiBvcGVyYXRpb24ua2VlcDtcbiAgICB9O1xufTtcbnZhciBjcmVhdGVRdWVyeVRlc3RlciA9IGZ1bmN0aW9uIChxdWVyeSwgb3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsgb3B0aW9ucyA9IHt9OyB9XG4gICAgcmV0dXJuIGNyZWF0ZU9wZXJhdGlvblRlc3RlcihjcmVhdGVRdWVyeU9wZXJhdGlvbihxdWVyeSwgbnVsbCwgb3B0aW9ucykpO1xufTtcblxudmFyICROZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoJE5lLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uICROZSgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLnByb3BvcCA9IHRydWU7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgJE5lLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLl90ZXN0ID0gY3JlYXRlVGVzdGVyKHRoaXMucGFyYW1zLCB0aGlzLm9wdGlvbnMuY29tcGFyZSk7XG4gICAgfTtcbiAgICAkTmUucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLnJlc2V0LmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMua2VlcCA9IHRydWU7XG4gICAgfTtcbiAgICAkTmUucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICBpZiAodGhpcy5fdGVzdChpdGVtKSkge1xuICAgICAgICAgICAgdGhpcy5kb25lID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMua2VlcCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gJE5lO1xufShCYXNlT3BlcmF0aW9uKSk7XG4vLyBodHRwczovL2RvY3MubW9uZ29kYi5jb20vbWFudWFsL3JlZmVyZW5jZS9vcGVyYXRvci9xdWVyeS9lbGVtTWF0Y2gvXG52YXIgJEVsZW1NYXRjaCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoJEVsZW1NYXRjaCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiAkRWxlbU1hdGNoKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMucHJvcG9wID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAkRWxlbU1hdGNoLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMucGFyYW1zIHx8IHR5cGVvZiB0aGlzLnBhcmFtcyAhPT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWFsZm9ybWVkIHF1ZXJ5LiAkZWxlbU1hdGNoIG11c3QgYnkgYW4gb2JqZWN0LlwiKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9xdWVyeU9wZXJhdGlvbiA9IGNyZWF0ZVF1ZXJ5T3BlcmF0aW9uKHRoaXMucGFyYW1zLCB0aGlzLm93bmVyeVF1ZXJ5LCB0aGlzLm9wdGlvbnMpO1xuICAgIH07XG4gICAgJEVsZW1NYXRjaC5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUucmVzZXQuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5fcXVlcnlPcGVyYXRpb24ucmVzZXQoKTtcbiAgICB9O1xuICAgICRFbGVtTWF0Y2gucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICBpZiAoaXNBcnJheShpdGVtKSkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gaXRlbS5sZW5ndGg7IGkgPCBsZW5ndGhfMTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgLy8gcmVzZXQgcXVlcnkgb3BlcmF0aW9uIHNpbmNlIGl0ZW0gYmVpbmcgdGVzdGVkIG5lZWRzIHRvIHBhc3MgX2FsbF8gcXVlcnlcbiAgICAgICAgICAgICAgICAvLyBvcGVyYXRpb25zIGZvciBpdCB0byBiZSBhIHN1Y2Nlc3NcbiAgICAgICAgICAgICAgICB0aGlzLl9xdWVyeU9wZXJhdGlvbi5yZXNldCgpO1xuICAgICAgICAgICAgICAgIHZhciBjaGlsZCA9IGl0ZW1baV07XG4gICAgICAgICAgICAgICAgdGhpcy5fcXVlcnlPcGVyYXRpb24ubmV4dChjaGlsZCwgaSwgaXRlbSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIHRoaXMua2VlcCA9IHRoaXMua2VlcCB8fCB0aGlzLl9xdWVyeU9wZXJhdGlvbi5rZWVwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5kb25lID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZG9uZSA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5rZWVwID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiAkRWxlbU1hdGNoO1xufShCYXNlT3BlcmF0aW9uKSk7XG52YXIgJE5vdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoJE5vdCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiAkTm90KCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMucHJvcG9wID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAkTm90LnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLl9xdWVyeU9wZXJhdGlvbiA9IGNyZWF0ZVF1ZXJ5T3BlcmF0aW9uKHRoaXMucGFyYW1zLCB0aGlzLm93bmVyeVF1ZXJ5LCB0aGlzLm9wdGlvbnMpO1xuICAgIH07XG4gICAgJE5vdC5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUucmVzZXQuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5fcXVlcnlPcGVyYXRpb24ucmVzZXQoKTtcbiAgICB9O1xuICAgICROb3QucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoaXRlbSwga2V5LCBvd25lciwgcm9vdCkge1xuICAgICAgICB0aGlzLl9xdWVyeU9wZXJhdGlvbi5uZXh0KGl0ZW0sIGtleSwgb3duZXIsIHJvb3QpO1xuICAgICAgICB0aGlzLmRvbmUgPSB0aGlzLl9xdWVyeU9wZXJhdGlvbi5kb25lO1xuICAgICAgICB0aGlzLmtlZXAgPSAhdGhpcy5fcXVlcnlPcGVyYXRpb24ua2VlcDtcbiAgICB9O1xuICAgIHJldHVybiAkTm90O1xufShCYXNlT3BlcmF0aW9uKSk7XG52YXIgJFNpemUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKCRTaXplLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uICRTaXplKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMucHJvcG9wID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAkU2l6ZS5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uICgpIHsgfTtcbiAgICAkU2l6ZS5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgIGlmIChpc0FycmF5KGl0ZW0pICYmIGl0ZW0ubGVuZ3RoID09PSB0aGlzLnBhcmFtcykge1xuICAgICAgICAgICAgdGhpcy5kb25lID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMua2VlcCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gaWYgKHBhcmVudCAmJiBwYXJlbnQubGVuZ3RoID09PSB0aGlzLnBhcmFtcykge1xuICAgICAgICAvLyAgIHRoaXMuZG9uZSA9IHRydWU7XG4gICAgICAgIC8vICAgdGhpcy5rZWVwID0gdHJ1ZTtcbiAgICAgICAgLy8gfVxuICAgIH07XG4gICAgcmV0dXJuICRTaXplO1xufShCYXNlT3BlcmF0aW9uKSk7XG52YXIgYXNzZXJ0R3JvdXBOb3RFbXB0eSA9IGZ1bmN0aW9uICh2YWx1ZXMpIHtcbiAgICBpZiAodmFsdWVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCIkYW5kLyRvci8kbm9yIG11c3QgYmUgYSBub25lbXB0eSBhcnJheVwiKTtcbiAgICB9XG59O1xudmFyICRPciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoJE9yLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uICRPcigpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLnByb3BvcCA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgICRPci5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgYXNzZXJ0R3JvdXBOb3RFbXB0eSh0aGlzLnBhcmFtcyk7XG4gICAgICAgIHRoaXMuX29wcyA9IHRoaXMucGFyYW1zLm1hcChmdW5jdGlvbiAob3ApIHtcbiAgICAgICAgICAgIHJldHVybiBjcmVhdGVRdWVyeU9wZXJhdGlvbihvcCwgbnVsbCwgX3RoaXMub3B0aW9ucyk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgJE9yLnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5kb25lID0gZmFsc2U7XG4gICAgICAgIHRoaXMua2VlcCA9IGZhbHNlO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoXzIgPSB0aGlzLl9vcHMubGVuZ3RoOyBpIDwgbGVuZ3RoXzI7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5fb3BzW2ldLnJlc2V0KCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgICRPci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uIChpdGVtLCBrZXksIG93bmVyKSB7XG4gICAgICAgIHZhciBkb25lID0gZmFsc2U7XG4gICAgICAgIHZhciBzdWNjZXNzID0gZmFsc2U7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMyA9IHRoaXMuX29wcy5sZW5ndGg7IGkgPCBsZW5ndGhfMzsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgb3AgPSB0aGlzLl9vcHNbaV07XG4gICAgICAgICAgICBvcC5uZXh0KGl0ZW0sIGtleSwgb3duZXIpO1xuICAgICAgICAgICAgaWYgKG9wLmtlZXApIHtcbiAgICAgICAgICAgICAgICBkb25lID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBzdWNjZXNzID0gb3Aua2VlcDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmtlZXAgPSBzdWNjZXNzO1xuICAgICAgICB0aGlzLmRvbmUgPSBkb25lO1xuICAgIH07XG4gICAgcmV0dXJuICRPcjtcbn0oQmFzZU9wZXJhdGlvbikpO1xudmFyICROb3IgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKCROb3IsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gJE5vcigpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLnByb3BvcCA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgICROb3IucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoaXRlbSwga2V5LCBvd25lcikge1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLm5leHQuY2FsbCh0aGlzLCBpdGVtLCBrZXksIG93bmVyKTtcbiAgICAgICAgdGhpcy5rZWVwID0gIXRoaXMua2VlcDtcbiAgICB9O1xuICAgIHJldHVybiAkTm9yO1xufSgkT3IpKTtcbnZhciAkSW4gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKCRJbiwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiAkSW4oKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5wcm9wb3AgPSB0cnVlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgICRJbi5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIHBhcmFtcyA9IEFycmF5LmlzQXJyYXkodGhpcy5wYXJhbXMpID8gdGhpcy5wYXJhbXMgOiBbdGhpcy5wYXJhbXNdO1xuICAgICAgICB0aGlzLl90ZXN0ZXJzID0gcGFyYW1zLm1hcChmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIGlmIChjb250YWluc09wZXJhdGlvbih2YWx1ZSwgX3RoaXMub3B0aW9ucykpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJjYW5ub3QgbmVzdCAkIHVuZGVyIFwiLmNvbmNhdChfdGhpcy5uYW1lLnRvTG93ZXJDYXNlKCkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjcmVhdGVUZXN0ZXIodmFsdWUsIF90aGlzLm9wdGlvbnMuY29tcGFyZSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgJEluLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKGl0ZW0sIGtleSwgb3duZXIpIHtcbiAgICAgICAgdmFyIGRvbmUgPSBmYWxzZTtcbiAgICAgICAgdmFyIHN1Y2Nlc3MgPSBmYWxzZTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF80ID0gdGhpcy5fdGVzdGVycy5sZW5ndGg7IGkgPCBsZW5ndGhfNDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgdGVzdCA9IHRoaXMuX3Rlc3RlcnNbaV07XG4gICAgICAgICAgICBpZiAodGVzdChpdGVtKSkge1xuICAgICAgICAgICAgICAgIGRvbmUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHN1Y2Nlc3MgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMua2VlcCA9IHN1Y2Nlc3M7XG4gICAgICAgIHRoaXMuZG9uZSA9IGRvbmU7XG4gICAgfTtcbiAgICByZXR1cm4gJEluO1xufShCYXNlT3BlcmF0aW9uKSk7XG52YXIgJE5pbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoJE5pbiwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiAkTmluKHBhcmFtcywgb3duZXJRdWVyeSwgb3B0aW9ucywgbmFtZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwYXJhbXMsIG93bmVyUXVlcnksIG9wdGlvbnMsIG5hbWUpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLnByb3BvcCA9IHRydWU7XG4gICAgICAgIF90aGlzLl9pbiA9IG5ldyAkSW4ocGFyYW1zLCBvd25lclF1ZXJ5LCBvcHRpb25zLCBuYW1lKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAkTmluLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKGl0ZW0sIGtleSwgb3duZXIsIHJvb3QpIHtcbiAgICAgICAgdGhpcy5faW4ubmV4dChpdGVtLCBrZXksIG93bmVyKTtcbiAgICAgICAgaWYgKGlzQXJyYXkob3duZXIpICYmICFyb290KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5faW4ua2VlcCkge1xuICAgICAgICAgICAgICAgIHRoaXMua2VlcCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMuZG9uZSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChrZXkgPT0gb3duZXIubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICAgIHRoaXMua2VlcCA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5kb25lID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMua2VlcCA9ICF0aGlzLl9pbi5rZWVwO1xuICAgICAgICAgICAgdGhpcy5kb25lID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgJE5pbi5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUucmVzZXQuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5faW4ucmVzZXQoKTtcbiAgICB9O1xuICAgIHJldHVybiAkTmluO1xufShCYXNlT3BlcmF0aW9uKSk7XG52YXIgJEV4aXN0cyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoJEV4aXN0cywgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiAkRXhpc3RzKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMucHJvcG9wID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAkRXhpc3RzLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKGl0ZW0sIGtleSwgb3duZXIsIHJvb3QsIGxlYWYpIHtcbiAgICAgICAgaWYgKCFsZWFmKSB7XG4gICAgICAgICAgICB0aGlzLmRvbmUgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5rZWVwID0gIXRoaXMucGFyYW1zO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG93bmVyLmhhc093blByb3BlcnR5KGtleSkgPT09IHRoaXMucGFyYW1zKSB7XG4gICAgICAgICAgICB0aGlzLmRvbmUgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5rZWVwID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuICRFeGlzdHM7XG59KEJhc2VPcGVyYXRpb24pKTtcbnZhciAkQW5kID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcygkQW5kLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uICRBbmQocGFyYW1zLCBvd25lcnlRdWVyeSwgb3B0aW9ucywgbmFtZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwYXJhbXMsIG93bmVyeVF1ZXJ5LCBvcHRpb25zLCBwYXJhbXMubWFwKGZ1bmN0aW9uIChxdWVyeSkgeyByZXR1cm4gY3JlYXRlUXVlcnlPcGVyYXRpb24ocXVlcnksIG93bmVyeVF1ZXJ5LCBvcHRpb25zKTsgfSksIG5hbWUpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLnByb3BvcCA9IGZhbHNlO1xuICAgICAgICBhc3NlcnRHcm91cE5vdEVtcHR5KHBhcmFtcyk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgJEFuZC5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uIChpdGVtLCBrZXksIG93bmVyLCByb290KSB7XG4gICAgICAgIHRoaXMuY2hpbGRyZW5OZXh0KGl0ZW0sIGtleSwgb3duZXIsIHJvb3QpO1xuICAgIH07XG4gICAgcmV0dXJuICRBbmQ7XG59KE5hbWVkR3JvdXBPcGVyYXRpb24pKTtcbnZhciAkQWxsID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcygkQWxsLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uICRBbGwocGFyYW1zLCBvd25lcnlRdWVyeSwgb3B0aW9ucywgbmFtZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwYXJhbXMsIG93bmVyeVF1ZXJ5LCBvcHRpb25zLCBwYXJhbXMubWFwKGZ1bmN0aW9uIChxdWVyeSkgeyByZXR1cm4gY3JlYXRlUXVlcnlPcGVyYXRpb24ocXVlcnksIG93bmVyeVF1ZXJ5LCBvcHRpb25zKTsgfSksIG5hbWUpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLnByb3BvcCA9IHRydWU7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgJEFsbC5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uIChpdGVtLCBrZXksIG93bmVyLCByb290KSB7XG4gICAgICAgIHRoaXMuY2hpbGRyZW5OZXh0KGl0ZW0sIGtleSwgb3duZXIsIHJvb3QpO1xuICAgIH07XG4gICAgcmV0dXJuICRBbGw7XG59KE5hbWVkR3JvdXBPcGVyYXRpb24pKTtcbnZhciAkZXEgPSBmdW5jdGlvbiAocGFyYW1zLCBvd25lcnlRdWVyeSwgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgRXF1YWxzT3BlcmF0aW9uKHBhcmFtcywgb3duZXJ5UXVlcnksIG9wdGlvbnMpO1xufTtcbnZhciAkbmUgPSBmdW5jdGlvbiAocGFyYW1zLCBvd25lcnlRdWVyeSwgb3B0aW9ucywgbmFtZSkgeyByZXR1cm4gbmV3ICROZShwYXJhbXMsIG93bmVyeVF1ZXJ5LCBvcHRpb25zLCBuYW1lKTsgfTtcbnZhciAkb3IgPSBmdW5jdGlvbiAocGFyYW1zLCBvd25lcnlRdWVyeSwgb3B0aW9ucywgbmFtZSkgeyByZXR1cm4gbmV3ICRPcihwYXJhbXMsIG93bmVyeVF1ZXJ5LCBvcHRpb25zLCBuYW1lKTsgfTtcbnZhciAkbm9yID0gZnVuY3Rpb24gKHBhcmFtcywgb3duZXJ5UXVlcnksIG9wdGlvbnMsIG5hbWUpIHsgcmV0dXJuIG5ldyAkTm9yKHBhcmFtcywgb3duZXJ5UXVlcnksIG9wdGlvbnMsIG5hbWUpOyB9O1xudmFyICRlbGVtTWF0Y2ggPSBmdW5jdGlvbiAocGFyYW1zLCBvd25lcnlRdWVyeSwgb3B0aW9ucywgbmFtZSkgeyByZXR1cm4gbmV3ICRFbGVtTWF0Y2gocGFyYW1zLCBvd25lcnlRdWVyeSwgb3B0aW9ucywgbmFtZSk7IH07XG52YXIgJG5pbiA9IGZ1bmN0aW9uIChwYXJhbXMsIG93bmVyeVF1ZXJ5LCBvcHRpb25zLCBuYW1lKSB7IHJldHVybiBuZXcgJE5pbihwYXJhbXMsIG93bmVyeVF1ZXJ5LCBvcHRpb25zLCBuYW1lKTsgfTtcbnZhciAkaW4gPSBmdW5jdGlvbiAocGFyYW1zLCBvd25lcnlRdWVyeSwgb3B0aW9ucywgbmFtZSkge1xuICAgIHJldHVybiBuZXcgJEluKHBhcmFtcywgb3duZXJ5UXVlcnksIG9wdGlvbnMsIG5hbWUpO1xufTtcbnZhciAkbHQgPSBudW1lcmljYWxPcGVyYXRpb24oZnVuY3Rpb24gKHBhcmFtcykgeyByZXR1cm4gZnVuY3Rpb24gKGIpIHtcbiAgICByZXR1cm4gYiAhPSBudWxsICYmIGIgPCBwYXJhbXM7XG59OyB9KTtcbnZhciAkbHRlID0gbnVtZXJpY2FsT3BlcmF0aW9uKGZ1bmN0aW9uIChwYXJhbXMpIHsgcmV0dXJuIGZ1bmN0aW9uIChiKSB7XG4gICAgcmV0dXJuIGIgPT09IHBhcmFtcyB8fCBiIDw9IHBhcmFtcztcbn07IH0pO1xudmFyICRndCA9IG51bWVyaWNhbE9wZXJhdGlvbihmdW5jdGlvbiAocGFyYW1zKSB7IHJldHVybiBmdW5jdGlvbiAoYikge1xuICAgIHJldHVybiBiICE9IG51bGwgJiYgYiA+IHBhcmFtcztcbn07IH0pO1xudmFyICRndGUgPSBudW1lcmljYWxPcGVyYXRpb24oZnVuY3Rpb24gKHBhcmFtcykgeyByZXR1cm4gZnVuY3Rpb24gKGIpIHtcbiAgICByZXR1cm4gYiA9PT0gcGFyYW1zIHx8IGIgPj0gcGFyYW1zO1xufTsgfSk7XG52YXIgJG1vZCA9IGZ1bmN0aW9uIChfYSwgb3duZXJ5UXVlcnksIG9wdGlvbnMpIHtcbiAgICB2YXIgbW9kID0gX2FbMF0sIGVxdWFsc1ZhbHVlID0gX2FbMV07XG4gICAgcmV0dXJuIG5ldyBFcXVhbHNPcGVyYXRpb24oZnVuY3Rpb24gKGIpIHsgcmV0dXJuIGNvbXBhcmFibGUoYikgJSBtb2QgPT09IGVxdWFsc1ZhbHVlOyB9LCBvd25lcnlRdWVyeSwgb3B0aW9ucyk7XG59O1xudmFyICRleGlzdHMgPSBmdW5jdGlvbiAocGFyYW1zLCBvd25lcnlRdWVyeSwgb3B0aW9ucywgbmFtZSkgeyByZXR1cm4gbmV3ICRFeGlzdHMocGFyYW1zLCBvd25lcnlRdWVyeSwgb3B0aW9ucywgbmFtZSk7IH07XG52YXIgJHJlZ2V4ID0gZnVuY3Rpb24gKHBhdHRlcm4sIG93bmVyeVF1ZXJ5LCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBFcXVhbHNPcGVyYXRpb24obmV3IFJlZ0V4cChwYXR0ZXJuLCBvd25lcnlRdWVyeS4kb3B0aW9ucyksIG93bmVyeVF1ZXJ5LCBvcHRpb25zKTtcbn07XG52YXIgJG5vdCA9IGZ1bmN0aW9uIChwYXJhbXMsIG93bmVyeVF1ZXJ5LCBvcHRpb25zLCBuYW1lKSB7IHJldHVybiBuZXcgJE5vdChwYXJhbXMsIG93bmVyeVF1ZXJ5LCBvcHRpb25zLCBuYW1lKTsgfTtcbnZhciB0eXBlQWxpYXNlcyA9IHtcbiAgICBudW1iZXI6IGZ1bmN0aW9uICh2KSB7IHJldHVybiB0eXBlb2YgdiA9PT0gXCJudW1iZXJcIjsgfSxcbiAgICBzdHJpbmc6IGZ1bmN0aW9uICh2KSB7IHJldHVybiB0eXBlb2YgdiA9PT0gXCJzdHJpbmdcIjsgfSxcbiAgICBib29sOiBmdW5jdGlvbiAodikgeyByZXR1cm4gdHlwZW9mIHYgPT09IFwiYm9vbGVhblwiOyB9LFxuICAgIGFycmF5OiBmdW5jdGlvbiAodikgeyByZXR1cm4gQXJyYXkuaXNBcnJheSh2KTsgfSxcbiAgICBudWxsOiBmdW5jdGlvbiAodikgeyByZXR1cm4gdiA9PT0gbnVsbDsgfSxcbiAgICB0aW1lc3RhbXA6IGZ1bmN0aW9uICh2KSB7IHJldHVybiB2IGluc3RhbmNlb2YgRGF0ZTsgfSxcbn07XG52YXIgJHR5cGUgPSBmdW5jdGlvbiAoY2xhenosIG93bmVyeVF1ZXJ5LCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBFcXVhbHNPcGVyYXRpb24oZnVuY3Rpb24gKGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBjbGF6eiA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgaWYgKCF0eXBlQWxpYXNlc1tjbGF6el0pIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUeXBlIGFsaWFzIGRvZXMgbm90IGV4aXN0XCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHR5cGVBbGlhc2VzW2NsYXp6XShiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYiAhPSBudWxsID8gYiBpbnN0YW5jZW9mIGNsYXp6IHx8IGIuY29uc3RydWN0b3IgPT09IGNsYXp6IDogZmFsc2U7XG4gICAgfSwgb3duZXJ5UXVlcnksIG9wdGlvbnMpO1xufTtcbnZhciAkYW5kID0gZnVuY3Rpb24gKHBhcmFtcywgb3duZXJRdWVyeSwgb3B0aW9ucywgbmFtZSkgeyByZXR1cm4gbmV3ICRBbmQocGFyYW1zLCBvd25lclF1ZXJ5LCBvcHRpb25zLCBuYW1lKTsgfTtcbnZhciAkYWxsID0gZnVuY3Rpb24gKHBhcmFtcywgb3duZXJRdWVyeSwgb3B0aW9ucywgbmFtZSkgeyByZXR1cm4gbmV3ICRBbGwocGFyYW1zLCBvd25lclF1ZXJ5LCBvcHRpb25zLCBuYW1lKTsgfTtcbnZhciAkc2l6ZSA9IGZ1bmN0aW9uIChwYXJhbXMsIG93bmVyUXVlcnksIG9wdGlvbnMpIHsgcmV0dXJuIG5ldyAkU2l6ZShwYXJhbXMsIG93bmVyUXVlcnksIG9wdGlvbnMsIFwiJHNpemVcIik7IH07XG52YXIgJG9wdGlvbnMgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBudWxsOyB9O1xudmFyICR3aGVyZSA9IGZ1bmN0aW9uIChwYXJhbXMsIG93bmVyUXVlcnksIG9wdGlvbnMpIHtcbiAgICB2YXIgdGVzdDtcbiAgICBpZiAoaXNGdW5jdGlvbihwYXJhbXMpKSB7XG4gICAgICAgIHRlc3QgPSBwYXJhbXM7XG4gICAgfVxuICAgIGVsc2UgaWYgKCFwcm9jZXNzLmVudi5DU1BfRU5BQkxFRCkge1xuICAgICAgICB0ZXN0ID0gbmV3IEZ1bmN0aW9uKFwib2JqXCIsIFwicmV0dXJuIFwiICsgcGFyYW1zKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkluIENTUCBtb2RlLCBzaWZ0IGRvZXMgbm90IHN1cHBvcnQgc3RyaW5ncyBpbiBcXFwiJHdoZXJlXFxcIiBjb25kaXRpb25cIik7XG4gICAgfVxuICAgIHJldHVybiBuZXcgRXF1YWxzT3BlcmF0aW9uKGZ1bmN0aW9uIChiKSB7IHJldHVybiB0ZXN0LmJpbmQoYikoYik7IH0sIG93bmVyUXVlcnksIG9wdGlvbnMpO1xufTtcblxudmFyIGRlZmF1bHRPcGVyYXRpb25zID0gLyojX19QVVJFX18qL09iamVjdC5mcmVlemUoe1xuICAgIF9fcHJvdG9fXzogbnVsbCxcbiAgICAkU2l6ZTogJFNpemUsXG4gICAgJGFsbDogJGFsbCxcbiAgICAkYW5kOiAkYW5kLFxuICAgICRlbGVtTWF0Y2g6ICRlbGVtTWF0Y2gsXG4gICAgJGVxOiAkZXEsXG4gICAgJGV4aXN0czogJGV4aXN0cyxcbiAgICAkZ3Q6ICRndCxcbiAgICAkZ3RlOiAkZ3RlLFxuICAgICRpbjogJGluLFxuICAgICRsdDogJGx0LFxuICAgICRsdGU6ICRsdGUsXG4gICAgJG1vZDogJG1vZCxcbiAgICAkbmU6ICRuZSxcbiAgICAkbmluOiAkbmluLFxuICAgICRub3I6ICRub3IsXG4gICAgJG5vdDogJG5vdCxcbiAgICAkb3B0aW9uczogJG9wdGlvbnMsXG4gICAgJG9yOiAkb3IsXG4gICAgJHJlZ2V4OiAkcmVnZXgsXG4gICAgJHNpemU6ICRzaXplLFxuICAgICR0eXBlOiAkdHlwZSxcbiAgICAkd2hlcmU6ICR3aGVyZVxufSk7XG5cbnZhciBjcmVhdGVEZWZhdWx0UXVlcnlPcGVyYXRpb24gPSBmdW5jdGlvbiAocXVlcnksIG93bmVyUXVlcnksIF9hKSB7XG4gICAgdmFyIF9iID0gX2EgPT09IHZvaWQgMCA/IHt9IDogX2EsIGNvbXBhcmUgPSBfYi5jb21wYXJlLCBvcGVyYXRpb25zID0gX2Iub3BlcmF0aW9ucztcbiAgICByZXR1cm4gY3JlYXRlUXVlcnlPcGVyYXRpb24ocXVlcnksIG93bmVyUXVlcnksIHtcbiAgICAgICAgY29tcGFyZTogY29tcGFyZSxcbiAgICAgICAgb3BlcmF0aW9uczogT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdE9wZXJhdGlvbnMsIG9wZXJhdGlvbnMgfHwge30pLFxuICAgIH0pO1xufTtcbnZhciBjcmVhdGVEZWZhdWx0UXVlcnlUZXN0ZXIgPSBmdW5jdGlvbiAocXVlcnksIG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7IG9wdGlvbnMgPSB7fTsgfVxuICAgIHZhciBvcCA9IGNyZWF0ZURlZmF1bHRRdWVyeU9wZXJhdGlvbihxdWVyeSwgbnVsbCwgb3B0aW9ucyk7XG4gICAgcmV0dXJuIGNyZWF0ZU9wZXJhdGlvblRlc3RlcihvcCk7XG59O1xuXG5leHBvcnQgeyAkU2l6ZSwgJGFsbCwgJGFuZCwgJGVsZW1NYXRjaCwgJGVxLCAkZXhpc3RzLCAkZ3QsICRndGUsICRpbiwgJGx0LCAkbHRlLCAkbW9kLCAkbmUsICRuaW4sICRub3IsICRub3QsICRvcHRpb25zLCAkb3IsICRyZWdleCwgJHNpemUsICR0eXBlLCAkd2hlcmUsIEVxdWFsc09wZXJhdGlvbiwgY3JlYXRlRGVmYXVsdFF1ZXJ5T3BlcmF0aW9uLCBjcmVhdGVFcXVhbHNPcGVyYXRpb24sIGNyZWF0ZU9wZXJhdGlvblRlc3RlciwgY3JlYXRlUXVlcnlPcGVyYXRpb24sIGNyZWF0ZVF1ZXJ5VGVzdGVyLCBjcmVhdGVEZWZhdWx0UXVlcnlUZXN0ZXIgYXMgZGVmYXVsdCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwXG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/sift/es5m/index.js\n");

/***/ })

};
;